{% import "macros/menu.html.twig" as menu %}

{% set hasHero = page.home ? 'fixed' : 'static' %}

<nav x-data="{ openMenu: false, wideNav: false}" :class="{
        'bg-transparent border-0': openMenu,
        'bg-white bg-opacity-50 backdrop-blur-md overflow-hidden': !openMenu,
        'shadow-lg bg-opacity-90 top-[1vw] !pr-8 pl-1 py-0': wideNav && !openMenu,
        }" class="{{ hasHero }} w-[94vw] top-[2vw] mx-auto left-0 right-0 rounded-full border-2 border-black flex justify-between items-center pr-10 pl-2 py-2 md:gap-16 z-40" @scroll.window="wideNav = window.scrollY > 100 ? true : false">
    <div class="flex items-center z-40 gap-8" :class="{ '[&>a]:w-1/2 !gap-4': wideNav }">
        {% include 'partials/logo.html.twig' %}

        {% if config.plugins.langswitcher.enabled %}
            {% include 'partials/langswitcher.html.twig' %}
        {% endif %}
    </div>

    <div class="flex flex-col gap-8 md:flex-row items-right">
        <div
            class="burger flex flex-col items-end hover:cursor-pointer md:hidden relative z-50"
            @click="openMenu = !openMenu; window.overlay.classList.toggle('h-screen')">
            <svg
                :class="openMenu ? 'fill-white' : 'fill-black'"
                xmlns="http://www.w3.org/2000/svg"
                width="32"
                height="32"
                fill="currentColor"
                class="transition"
                viewbox="0 0 16 16">
                <path
                    fill-rule="evenodd"
                    d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0
                        1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"/>
            </svg>
            <span class="text-xs transition" :class="openMenu ? 'text-white' : 'text-black'">
                Menu
            </span>
        </div>

        <ul
            class="h-0 md:h-full min-w-[50vw] md:min-w-max relative top-4 md:top-auto md:visible md:flex flex-col md:flex-row gap-8
                md:gap-12 content-center font-semibold uppercase text-right text-red-500 md:text-black z-50"
            :class="openMenu ? 'block' : 'hidden'">
            {% if config.theme.dropdown.enabled %}
                {{ menu.nav_loop(pages) }}
            {% endif %}
        </ul>
        <div
            class="bg-black fixed z-40 w-full h-full top-0 md:invisible shadow-[-20px_60px_60px_rgba(0,0,0,0.5)]"
            :class="openMenu ? 'visible' : 'invisible'"></div>

        {% if config.plugins.login.enabled %}
            {% include 'partials/login-status.html.twig' %}
        {% endif %}
    </div>
</nav>
